<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bitcoin Address & Invoice Generator â€“ AdaptBTC</title>
<style>
    body {font-family: Inter, Arial, sans-serif;background:#ffffff;margin:0;padding:30px;color:#1a1a1a;}
    h1 {font-size:32px;font-weight:700;}
    .section {margin-top:40px;padding:25px;border:1px solid #e0e0e0;border-radius:10px;}
    input,textarea,select {width:100%;padding:12px;margin-top:10px;border:1px solid #ccc;border-radius:6px;font-size:15px;}
    button {margin-top:15px;padding:12px 20px;background:#007bff;color:white;border:none;border-radius:6px;font-size:16px;cursor:pointer;}
    button:hover {opacity:.9;}
    .qr-box {margin-top:20px;text-align:center;}
    #qrcode {margin-top:15px;}
</style>
</head>
<body>
<h1>Bitcoin Address & Lightning Invoice Generator</h1>

<div class="section">
    <h2>Generate New Bitcoin Address (On-Chain)</h2>
    <button onclick="generateAddress()">Generate Address</button>
    <p><strong>Your New BTC Address:</strong></p>
    <input type="text" id="btcAddress" readonly>
    <div class="qr-box"><div id="btcQR"></div></div>
</div>

<div class="section">
    <h2>Create Lightning Invoice</h2>
    <label>Amount (sats):</label>
    <input type="number" id="invoiceAmount">
    <label>Memo (optional):</label>
    <input type="text" id="invoiceMemo">
    <button onclick="generateLNInvoice()">Generate Lightning Invoice</button>
    <p><strong>Lightning Invoice:</strong></p>
    <textarea id="lnInvoice" rows="3" readonly></textarea>
    <div class="qr-box"><div id="lnQR"></div></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bitcoinjs-lib/6.1.0/bitcoinjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<script>
function generateAddress() {
    const bitcoin = window.bitcoinjs;
    const keyPair = bitcoin.ECPair.makeRandom();
    const { address } = bitcoin.payments.p2wpkh({ pubkey: keyPair.publicKey, network: bitcoin.networks.bitcoin });
    document.getElementById("btcAddress").value = address;
    document.getElementById("btcQR").innerHTML = "";
    new QRCode(document.getElementById("btcQR"), address);
}

function generateLNInvoice() {
    const amount = document.getElementById("invoiceAmount").value;
    const memo = document.getElementById("invoiceMemo").value;
    if (!amount) { alert("Enter an amount in satoshis"); return; }
    const invoice = "lnbc" + amount + "0n1" + btoa(memo).substring(0, 10);
    document.getElementById("lnInvoice").value = invoice;
    document.getElementById("lnQR").innerHTML = "";
    new QRCode(document.getElementById("lnQR"), invoice);
}
</script>
</body>
</html>
